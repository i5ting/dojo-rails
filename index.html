<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Dojo-rails by robin850</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Dojo-rails</h1>
        <p class="header">The dojo javascript toolkit with Ruby on Rails !</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/robin850/dojo-rails/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/robin850/dojo-rails/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/robin850/dojo-rails">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/robin850">robin850</a></p>


      </header>
      <section>
        <h1>Dojo with Ruby on Rails</h1>

<p>I haven't found a good implementation of the cool javascript Dojo toolkit library so I decided to release my own gem. This gem allows you to use the full dojo suite in your <a href="http://github.com/rails/rails">Ruby on Rails</a> application. The project is divided into three gems dojo-rails, <a href="https://github.com/robin850/dijit-rails">dijit-rails</a> and <a href="https://github.com/robin850/dojox-rails">dojox-rails</a>. </p>

<p>This repository used to host each project's folder but there are now in their own repository. This one host dojo itself (the base and full version).</p>

<p><strong>Notice</strong> : these gems aren't very stable for the moment. You must be aware of that. </p>

<h2>Installation and use</h2>

<p>To use these gems, you should edit the <code>Gemfile</code> of your application and add the following line:</p>

<div class="highlight"><pre><span class="n">gem</span> <span class="s1">'dojo-rails'</span>
</pre></div>

<p>Then run the <code>bundle</code> command to install it. Now, inside your javascript assets, you can use dojo? If you want more information on how to set-up and use one of these gems in your application, please see <a href="https://github.com/robin850/dojo-rails/wiki">the wiki</a>.</p>

<p>Notice that <code>dojo-rails</code> provides both the base and full distribution of the toolkit. If you just the want the base distribution, in your js file, add:</p>

<div class="highlight"><pre><span class="c1">//= require dojo</span>
</pre></div>

<p>And for the full version:</p>

<div class="highlight"><pre><span class="c1">//= require dojo/dojo</span>
</pre></div>

<p>That's it! It may seem obvious but you can also use <a href="http://coffeescript.org">CoffeeScript</a> in your files. Here an example <a href="http://dojotoolkit.org/reference-guide/1.8/">reference guide</a>:</p>

<div class="highlight"><pre><span class="c1">#= require dojo</span>
<span class="nx">require</span><span class="p">([</span><span class="s">"dojo/router"</span><span class="p">,</span> <span class="s">"dojo/dom"</span><span class="p">,</span> <span class="s">"dojo/fx"</span><span class="p">,</span> <span class="s">"dojo/domReady!"</span><span class="p">],</span> <span class="nf">(router, dom, fx) -&gt;</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s">"/articles/:id"</span><span class="p">,</span> <span class="nf">(evt) -&gt;</span>
    <span class="nx">alert</span> <span class="s">"The article has the id "</span> <span class="o">+</span> <span class="nx">evt</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
  <span class="p">)</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">startup</span><span class="p">()</span>

  <span class="nv">greeting = </span><span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s">"greeting"</span><span class="p">)</span>
  <span class="nx">greeting</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s">" from Dojo!"</span>

  <span class="nx">fx</span><span class="p">.</span><span class="nx">slideTo</span><span class="p">({</span>
    <span class="nv">top: </span><span class="mi">100</span><span class="p">,</span>
    <span class="nv">left: </span><span class="mi">200</span><span class="p">,</span>
    <span class="nv">node: </span><span class="nx">greeting</span>
  <span class="p">}).</span><span class="nx">play</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>

<h3>Troubleshooting</h3>

<p>One of the worst problem when you use dojo-rails and Coffeescript together is that sometimes, Dojo defines functions which are reserved keyword in Coffeescript such as <code>then</code> with <code>dojo/request</code> or the <code>dojo/on</code> module that you will certainly name <code>on</code>. Except rename modules, there is no real solution such as for the <code>then</code> function. If you have a solution, <strong>please let me know</strong>!</p>

<h2>Usage with Asset Pipeline in Production</h2>

<p>To use with production and asset pipeline from Rails 3.1 you will need to have the <a href="http://dojotoolkit.org/documentation/tutorials/1.8/dojo_config/">djConfig</a> hash set before you load the dojo/dojo library</p>

<p><em>This is critical for production mode because otherwise the require[ ] statements will not load libraries correctly</em></p>

<p>Example contents of application.js</p>

<div class="highlight"><pre><span class="o">//=</span> <span class="nx">require</span> <span class="nx">dojo_config</span>
<span class="o">//=</span> <span class="nx">require</span> <span class="nx">dojo</span><span class="o">/</span><span class="nx">dojo</span>
</pre></div>

<p>Contents of dojo_config.js</p>

<div class="highlight"><pre><span class="nx">dojoConfig</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">baseUrl</span><span class="o">:</span> <span class="s1">'/assets/dojo/'</span>
<span class="p">};</span>
</pre></div>

<h2>Special thanks</h2>

<p>I want to thanks the <a href="http://github.com/rails/jquery-rails">jquery-rails</a> project ; it helps me to release theses three projects. I would also thanks the <a href="http://github.com/rails/">Ruby on Rails team</a> and its contributors. Thanks guys!</p>

<h2>Contribution</h2>

<h3>Code</h3>

<p>If you want to contribute to the code of the project to enhance a gem or the full suite, thanks ! You just have to :</p>

<ul>
<li>Fork the project</li>
<li>Clone the repository on your local machine</li>
<li>Create a new branch with <code>git checkout -b new_feature</code>
</li>
<li>Make changes and commit them</li>
<li><code>git push origin master</code></li>
<li>Open a new pull request</li>
</ul><h3>Bugs and issues</h3>

<p>If you found bug or if you have issues, please open a <a href="https://github.com/robin850/dojo-rails/issues/new">new ticket</a> on the issue tracker. Thank you a lot!</p>

<h2>License</h2>

<p>This project is released under the MIT license. See the <code>LICENSE</code> file for more information. Dojo Toolkit is available under either the terms of the modified BSD license or the Academic Free License version 2.1. Please see the <code>DOJO_LICENSE</code> file or <a href="http://dojotoolkit.org/license">visit the official page</a> for more information.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>